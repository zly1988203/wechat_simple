function handleTicket(n,a,c){var t='<div class="deblocking"><div class="main"><div class="progress"><span class="bar"></span></div><div class="content"><h4>长按图片'+a+'秒钟，解锁车票</h4><p>车票解锁后将不能退款，请慎重操作</p><div class="thumb longTap"></div></div></div></div>';$("body").append(t),$(".deblocking").off("click").on("click",function(n){$(n.target).hasClass("deblocking")&&$(".deblocking").hide(0,function(){$(".deblocking").remove()})});var i=n,e=10*a,o=100/e,l=null;if(i.data("time")){if(i.data("time")==e)return $(".progress").show(),d(i.data("time")),!1}else i.data("time",0);var s=i.data("time");function d(n){$(".progress .bar").width(n*o+"%")}function r(){d(s=e),i.data("time",e),i.data("lock",!0),c instanceof Function&&c()}$(".deblocking .longTap").on("touchstart",function(n){i.data("lock")||(n.preventDefault(),s=0,l=setInterval(function(){s>e&&(clearInterval(l),r()),d(++s),s>1&&$(".progress").show()},100))}).on("touchend",function(){i.data("lock")||(clearInterval(l),s<e?(d(s=0),$(".progress").hide()):r())})}$(function(){$(".checking").off("click").on("click",function(){var n=$(this).data("check-type");console.log("checkType:"+n),"1"==n&&handleTicket($(this),2,function(){console.log("成功")})})});