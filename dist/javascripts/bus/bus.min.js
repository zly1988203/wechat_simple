var targetType=isAndroid()?"tap":"click";$(function(){$.headerInit(),dataUtils.exChangeVal($(".exchange"),$("#startAddr"),$("#endAddr")),dataUtils.selectDate({el_trigger:$("#startTime"),el_popup:$("#select-date")}),dataUtils.reSetWidth($("#startTime")),adrsUtils.selectAddress({el_trigger:$(".search-station li"),el_popup:$("#search-address")}),$("#search-address .wrapper li:not(.remove-history)").on(targetType,function(){var e=$(this).find("h1").text();$("#search-address").setPopupData(e),$("#search-address .cancel").triggerHandler("click")}),adrsUtils.openCity({el_trigger:$("#setCityButton"),el_popup:$("#select-Citys")}),AMap.plugin("AMap.Geocoder",function(){if(geocoder=new AMap.Geocoder({}),""==lineParam.departCityName){var e={url:window.location.href};wxInitConfig(e,getGpsCallback)}})});var geocoder,lineParam={},searchMapAddCallback=function(e){$("#startAddr").val(e.address),$("#currentAddressDetail").html(e.address),$("#currentAddressDetail").attr("data-lng",lineParam.departLng),$("#currentAddressDetail").attr("data-lat",lineParam.departLat),$("#currentAddress").show()},getGpsCallback=function(e){console.log(e.longitude);var a=e.longitude+","+e.latitude;lineParam.departLng=e.longitude,lineParam.departLat=e.latitude;var t=[e.longitude,e.latitude];geoCallBack(1,t),searchAddressByGps(a,searchMapAddCallback),""!=lineParam.arriveLng&&""!=lineParam.arriveLat&&$("#searchBtn").attr("class","search-btn")};$(".scheduling").on("touchstart",function(e){var a=-1;$(".scheduling-list").find("li").each(function(){$(this).is(":hidden")||(a=$(this).index())});var t=$(".rolling li").length,i=($(this).width(),e.changedTouches[0].pageX);return $(this).on("touchmove",function(e){var r=e.changedTouches[0].pageX-i;Math.abs(r)>=.25*r&&(r<0&&($(".scheduling-list").find("li").eq(a).hide(),a-1<0?a=t-1:a-=1,$(".rolling .active").removeClass("active"),$(".rolling").find("li").eq(a).addClass("active"),$(".scheduling-list").find("li").eq(a).show(),$(".scheduling").off("touchmove")),r>0&&($(".scheduling-list").find("li").eq(a).hide(),a+1==t?a=0:a+=1,$(".rolling .active").removeClass("active"),$(".rolling").find("li").eq(a).addClass("active"),$(".scheduling-list").find("li").eq(a).show(),$(".scheduling").off("touchmove")))}),!1}).on("touchend",function(){$(".scheduling").off("touchmove")});