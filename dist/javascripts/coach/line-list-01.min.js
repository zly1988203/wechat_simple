function selectDate(){var t=$(".all-date-btn"),e=$("#select-date"),n=!1,a=function(){n||(n=!0,e.find(".date").datePicker({dateBase:"2017-10-10",weekend:!1,multiple:!1,gather:createData([10,11,12]),selectCallback:function(n){e.closePopup(function(){var e=n.selectData[0].date,a=e.year+"-"+e.month+"-"+e.day;t.val(a).siblings("i").text(a)})}}))};t.on("click",function(){$(this);e.popup("pull",a)})}function createData(t){var e=[];return t.forEach(function(t,n){for(var a=0,i=new Date(2017,t,0).getDate(),o=[],c=0;c<i;c++)(a=parseInt(10*Math.random().toFixed(2))+c+n)<=i&&o.push(a);for(var l=0;l<o.length;l++)for(var s=0;s<o.length;s++)o[l]==o[s]&&o.splice(s,1);o.sort(function(){return-1});for(var r=0;r<o.length;r++){var d={date:"2017-"+t+"-"+o[r],state:"select"};parseInt(2*Math.random())&&(d.comment="备注"),d.state="select",e.push(d)}}),e}function footHandle(t,e,n,a){var i,o=e.find("[data-handle=reset]"),c=e.find("[data-handle=submit]"),l=e.find(".main li"),s=l.eq(0),r=function(){var t=e.find(".scroll-box"),n=5*l.height()/parseFloat($("html").css("font-size"))+"rem";t.css("max-height",n);i&&i.destroy(),setTimeout(function(){i=new IScroll("#"+e.attr("id")+" .scroll-box",{click:function(){if(/iPhone|iPad|iPod|Macintosh/i.test(navigator.userAgent))return!1;if(/Chrome/i.test(navigator.userAgent))return/Android/i.test(navigator.userAgent);if(/Silk/i.test(navigator.userAgent))return!1;if(/Android/i.test(navigator.userAgent)){var t=navigator.userAgent.substr(navigator.userAgent.indexOf("Android")+8,3);return!(parseFloat(t[0]+t[3])<44)}}(),scrollX:!1,scrollY:!0,mouseWheel:!0})},300)};t.on("click",function(){e.popup("plate",function(){a instanceof Function&&a()}),e.data("init")||(e.data("init",!0),r())}),l.on("click",function(){var t=$(this),e=t.find("input");t.hasClass("active")?(t.removeClass("active"),e.prop("checked",!1),0==s.nextAll(".active").length&&s.addClass("active").find("input").prop("checked",!0)):(t.addClass("active"),e.prop("checked",!0),"不限"==e.val()?(s.addClass("active").find("input").prop("checked",!0),s.nextAll().removeClass("active").find("input").prop("checked",!1)):1==s.find("input:checked").length&&s.removeClass("active").find("input").prop("checked",!1))}),o.on("click",function(){s.addClass("active").find("input").prop("checked",!0),s.siblings().removeClass("active").find("input").prop("checked",!1)}),c.on("click",function(){e.closePopup(function(){n instanceof Function&&n()})})}$(function(){var t=new IScroll("#wrapper",{scrollX:!0,scrollY:!1,mouseWheel:!0}),e=$(".ola-date li.active");t.scrollToElement(e[0],500,!1,!1,IScroll.utils.ease.circular);var n=isAndroid()?"tap":"click";$(".ola-date li").on(n,function(){$(this).addClass("active"),$(this).siblings().removeClass("active"),t.scrollToElement($(this)[0],500,!1,!1,IScroll.utils.ease.circular)}),selectDate(),footHandle($("#selectStartStation"),$("#start-station"),function(){var t=[];$("[name=startStation]:checked").each(function(e,n){t.push($(n).val())}),console.log("出发站点",t)}),footHandle($("#selectEndStation"),$("#end-station"),function(){var t=[];$("[name=endStation]:checked").each(function(e,n){t.push($(n).val())}),console.log("到达站点",t)}),footHandle($("#selectStartTime"),$("#start-time"),function(){var t=[];$("[name=startTime]:checked").each(function(e,n){t.push($(n).val())}),console.log("发车时间",t)})});