var _myIScrollsa;$(function(){var a;[{id:"15428545",startAdrs:"创业投资大厦八楼",startArea:"深圳市南山区",endAdrs:"东莞东站金贝大厦",endArea:"东莞市东城区"}].forEach(function(a,e){var s=$('<div class="content" data-id="'+a.id+'">'),c=$('<div class="location"></div>'),r='<div class="startAdrs">            <div class="adrs">'+a.startAdrs+'</div>            <div class="area">'+a.startArea+"</div>        </div>",n='<div class="endAdrs">            <div class="adrs">'+a.endAdrs+'</div>            <div class="area">'+a.endArea+"</div>        </div>";s.append(c).append(r).append('<div class="center-line">            <div class="arrow"></div>        </div>').append(n).append('<div class="btn-list">            <div  class="call-car">叫车</div>            <div class="call-back">返程</div>        </div>'),$(".his-order").append(s)}),a=isAndroid()?"tap":"click",$(".call-car").on(a,function(){}),$(".call-back").on(a,function(){})}),$("#present .select-city-btn").on("click",function(){var a=$(this);$("#search-address").popup("push",function(){a.val().length,setTimeout(function(){$("#search-address .wrapper").css("height",$(window).height()-44),_myIScrollsa=new IScroll("#searchWrapper")},300)},function(e){a.val(e.name);$("#present_peopleNumber").data("value");"startAddr"==a.attr("id")||a.attr("id"),a.data("lng",e.lng),a.data("lat",e.lat)})}).backtrack({cancel:"#search-address .cancel",event:"click"}),$("#search-address .cancel").on("click",function(){$("#search-address").closePopup(function(){_myIScrollsa&&(_myIScrollsa.destroy(),_myIScrollsa=null)})});var _map,cpLock=!0,_isInitsa=!1;AMap.service(["AMap.PlaceSearch"],function(){var a={pageSize:10,pageIndex:1,city:$("#areaCode").val()};placeSearch=new AMap.PlaceSearch(a)}),$("#textSearchMap").focus(function(){showSearchAddressPanel()}).off("input").on({compositionstart:function(){cpLock=!1},compositionend:function(){cpLock=!0},input:function(){setTimeout(function(){if(cpLock){var a=$.trim($("#textSearchMap").val());placeSearch.search(a,function(e,s){var c=[];a.length<=0&&(e="no_data"),"complete"==e&&(c=s.poiList.pois);for(var r="",n=0;n<c.length;n++){var t=c[n].name.replace(a,'<span class="imp-blue">'+a+"</span>"),i=c[n].address.replace(a,'<span class="imp-blue">'+a+"</span>");r+='<li data-name="'+c[n].name+'" data-address="'+c[n].address+'" data-lat="'+c[n].location.lat+'" data-lng="'+c[n].location.lng+'"><div class="sui-cell-map"><div class="address">'+t+'</div><div class="city-area">'+i+"</div></div></li>"}$("#searchWrapper ul").html(r),$("#searchWrapper li").off("tap").on("tap",function(){hideSearchAddressResult()})})}},0)}});var showSearchAddressPanel=function(){if($("#searchWrapper").show(),$(".gather").hide(),!_isInitsa){_isInitsa=!0;var a=0,e=0;$("#searchWrapper").on("touchstart",function(){e=$(this).scrollTop(),a=event.touches[0].pageY}),$("#searchWrapper").on("touchmove",function(s){var c=a-s.touches[0].pageY;$(this).scrollTop(c+e)})}},hideSearchAddressResult=function(){$("#sarchCancelbtn").hide(),$("#closePanelBtn").show(),$("#searchWrapper").hide(),$(".map-panel").show()};